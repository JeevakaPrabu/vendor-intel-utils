From 02c0b308140192b706d3afa19759d638344bfc34 Mon Sep 17 00:00:00 2001
From: Hongcheng Xie <hongcheng.xie@intel.com>
Date: Thu, 16 Jul 2020 14:20:11 +0800
Subject: [PATCH] Don't clear env for use some k8s env

Change-Id: Iff1b9597dfe11a16dd12f312c4bd259540ab4a92
Signed-off-by: Hongcheng Xie <hongcheng.xie@intel.com>
---
 init/first_stage_init.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/init/first_stage_init.cpp b/init/first_stage_init.cpp
index 021557697..b0c78bff1 100644
--- a/init/first_stage_init.cpp
+++ b/init/first_stage_init.cpp
@@ -185,7 +185,8 @@ int FirstStageMain(int argc, char** argv) {
     // Clear the umask.
     umask(0);
 
-    CHECKCALL(clearenv());
+    // Don't clear env for use some env set by k8s
+    // CHECKCALL(clearenv());
     CHECKCALL(setenv("PATH", _PATH_DEFPATH, 1));
     // Get the basic filesystem setup we need put together in the initramdisk
     // on / and then we'll let the rc file figure out the rest.
-- 
2.39.0

