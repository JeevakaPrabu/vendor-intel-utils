From 3398074b4d1abbc1ec37fb1da7770d335af3c534 Mon Sep 17 00:00:00 2001
From: Tanuj Tekriwal <tanuj.tekriwal@intel.com>
Date: Fri, 13 Sep 2024 06:15:04 +0000
Subject: [PATCH] WA Disable gatekeeper aidl for A15 BM boot

Tests Done: MTL BM boots fine

Tracked-On: NA
Signed-off-by: Tanuj Tekriwal <tanuj.tekriwal@intel.com>
---
 groups/device-specific/caas/BoardConfig.mk         | 2 +-
 groups/device-specific/caas/framework_manifest.xml | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/groups/device-specific/caas/BoardConfig.mk b/groups/device-specific/caas/BoardConfig.mk
index f93ac00..5047504 100644
--- a/groups/device-specific/caas/BoardConfig.mk
+++ b/groups/device-specific/caas/BoardConfig.mk
@@ -52,4 +52,4 @@ BUILD_BROKEN_USES_BUILD_HOST_SHARED_LIBRARY := true
 BUILD_BROKEN_USES_BUILD_HOST_EXECUTABLE := true
 BUILD_BROKEN_USES_BUILD_COPY_HEADERS := true
 # PRODUCT_COPY_FILES directives.
-BUILD_BROKEN_ELF_PREBUILT_PRODUCT_COPY_FILES := true
+BUILD_BROKEN_ELF_PREBUILT_PRODUCT_COPY_FILES := false
diff --git a/groups/device-specific/caas/framework_manifest.xml b/groups/device-specific/caas/framework_manifest.xml
index 58905fa..f904fe2 100644
--- a/groups/device-specific/caas/framework_manifest.xml
+++ b/groups/device-specific/caas/framework_manifest.xml
@@ -52,14 +52,14 @@
         <version>1</version>
         <fqname>IThermal/default</fqname>
     </hal>
-    <hal format="aidl">
+    <!--hal format="aidl">
         <name>android.hardware.gatekeeper</name>
         <version>1</version>
         <interface>
             <name>IGatekeeper</name>
             <instance>default</instance>
         </interface>
-    </hal>
+    </hal-->
     <hal format="hidl">
         <name>android.hardware.audio</name>
         <transport>hwbinder</transport>
-- 
2.34.1

